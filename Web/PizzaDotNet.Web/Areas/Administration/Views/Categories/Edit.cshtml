@model PizzaDotNet.Web.ViewModels.Administration.Categories.AdminCategoryEditInputModel
@{
    this.ViewData["Title"] = "Create category";
}
<h1>Edit category</h1>
<form method="post" asp-action="Edit" enctype="multipart/form-data">
    <input asp-for="Id" hidden="hidden"></input>
    <div class="form-group">
        <div asp-validation-summary="All"></div>
    </div>
    <div class="form-group">
        <label asp-for="Name" class="control-label"></label>
        <input asp-for="Name" class="form-control"/>
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Description" class="control-label"></label>
        <input asp-for="Description" class="form-control"/>
        <span asp-validation-for="Description" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="ImageModel.ImageFile" class="control-label"></label>
        <input asp-for="ImageModel.ImageFile" class="form-control-file" onchange="readImage(this)"/>
        <span asp-validation-for="ImageModel.ImageFile" class="text-danger"></span>
        <br/>
        <img id="imageContainer" src="@Url.Content(@Model.ImageModel.ImageUrl ?? "~/images/placeholders/320x320.png")" alt="category image" class="img-fluid product-view-image"/>
    </div>
    <div class="form-group">
        <input asp-for="@Model.IsNewImage" class="" type="checkbox">
        <label asp-for="@Model.IsNewImage" class="form-check-label"></label>
    </div>
    <div class="form-group">
        <input type="submit" value="Confirm edit" class="btn btn-success"/>
    </div>
</form>

@section Scripts{
    <script>     
        const readImage = (input) => {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = (e) => {
                    $('#imageContainer')
                        .attr('src', e.target.result)
                        .width("auto")
                        .height(320);
                };
                
                reader.readAsDataURL(input.files[0]);
             }
        };
    </script>
}